<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Подземелья Слизерина — интерактив</title>
<style>
  :root{
    --bg:#0b0f12; --ink:#e8eef2; --muted:#9fb3c8;
    --card:#12171cE6; --edge:#23303a; --accent:#0f151a; --dur:420ms;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0;background:var(--bg);color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Noto Sans',sans-serif}

  .screen{position:relative;min-height:100svh;display:none;opacity:0;transform:scale(.985);
    transition:opacity var(--dur) ease, transform var(--dur) ease}
  .screen.active{display:block;opacity:1;transform:scale(1)}
  .screen.out{opacity:0;transform:scale(1.02)}

  .fullbg{position:absolute;inset:0;overflow:hidden}
  .fullbg img{width:100%;height:100%;object-fit:cover;filter:brightness(.78) saturate(0.95)}
  .overlay{position:relative;min-height:100svh;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:24px}

  .title{font-size:clamp(28px,5vw,56px);letter-spacing:.5px;text-align:center;margin:0 0 10px;text-shadow:0 10px 30px rgba(0,0,0,.6)}
  .hint{position:absolute;bottom:28px;left:0;right:0;text-align:center;color:#cdd8e2;font-size:14px;opacity:.9;animation:pulse 2s ease-in-out infinite}

  .wrap{max-width:1100px;margin:0 auto;padding:22px}
  .card{background:var(--card);backdrop-filter: blur(4px); border:1px solid var(--edge);border-radius:16px;box-shadow:0 12px 36px rgba(0,0,0,.35);padding:18px;animation:fadeUp .5s ease both}
  .topline{display:flex;align-items:center;justify-content:center;margin-bottom:12px}
  .topline h2{text-align:center;font-size:clamp(18px,3.5vw,26px);font-weight:600}
  .grid{display:grid;gap:14px;grid-template-columns:1fr}
  .grid2{display:grid;gap:14px;grid-template-columns:1fr 1fr}
  @media(min-width:720px){.grid{grid-template-columns:repeat(3,1fr)}}
  .choice{display:flex;flex-direction:column;gap:8px;background:var(--accent);border:1px solid var(--edge);border-radius:18px;overflow:hidden;cursor:pointer;transition:transform .18s ease,border-color .18s ease,box-shadow .18s ease}
  .choice:focus,.choice:hover{transform:translateY(-2px);border-color:#3a4a5a;box-shadow:0 6px 20px rgba(0,0,0,.35);outline:none}
  .ph{aspect-ratio:16/10;background:#0e1317;display:block;overflow:hidden}
  .ph img{width:100%;height:100%;object-fit:cover;display:block;transition:transform .35s ease}
  .choice:hover .ph img{transform:scale(1.03)}
  .label{padding:12px 12px 14px;font-size:15px;color:#dbe6ee}

  .centered{max-width:820px;margin:0 auto;text-align:center}
  .btns{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px;justify-content:center}
  .btn{display:inline-block;padding:10px 14px;border:1px solid var(--edge);border-radius:10px;background:#0f151a;color:#fff;text-decoration:none;cursor:pointer;transition:transform .15s ease,background .15s ease}
  .btn:hover{background:#141b22;transform:translateY(-1px)}

  .dead-wrap{position:relative;z-index:1;display:flex;align-items:center;justify-content:center;min-height:100svh;padding:22px}
  .dead-grid{display:grid;grid-template-columns:1fr 1fr;gap:16px;max-width:760px;width:100%}

  .pill{display:inline-block;margin:4px 0 8px;padding:6px 10px;border:1px solid var(--edge);border-radius:999px;color:#cbd6e0;background:#0b1216}
  @keyframes pulse{0%,100%{opacity:.6}50%{opacity:1}}
</style>
</head>
<body>

<!-- Главная: полноэкранный фон (desktop/mobile) -->
<section id="s0" class="screen active" onclick="go('s_intro1')">
  <div class="fullbg">
    <picture>
      <source media="(max-width: 640px)" srcset="images/hero-mobile.jpg">
      <img src="images/hero-desktop.jpg" alt="Подземелья Слизерина">
    </picture>
  </div>
  <div class="overlay">
    <h1 class="title">Добро пожаловать в Подземелья Слизерина</h1>
    <div class="hint">Нажмите в любом месте, чтобы продолжить</div>
  </div>
</section>

<!-- Первая развилка: фон (картинка №3), 3 карточки -->
<section id="s_intro1" class="screen">
  <div class="fullbg"><img src="images/bg-fork.jpg" alt=""></div>
  <div class="overlay">
    <div class="wrap"><div class="card">
      <div class="topline"><h2>Вы спустились по лестнице в подземелья Хогвартса. Перед вами длинный мрачный коридор. Вы всматриваетесь в следы, оставленные тыквой. Куда они ведут?</h2></div>
      <div class="grid">
        <article class="choice" onclick="go('dead_entrance')">
          <div class="ph"><img src="images/card-voices.jpg" alt=""></div>
          <div class="label">К шуму и звуку голосов</div>
        </article>
        <article class="choice" onclick="go('coming_soon')">
          <div class="ph"><img src="images/card-stairs.jpg" alt=""></div>
          <div class="label">К лестнице вниз</div>
        </article>
        <article class="choice" onclick="go('coming_soon')">
          <div class="ph"><img src="images/card-corridor.jpg" alt=""></div>
          <div class="label">Дальше по коридору</div>
        </article>
      </div>
    </div></div>
  </div>
</section>

<!-- Тупик: Лево/Право (как обсуждали) -->
<section id="dead_entrance" class="screen">
  <div class="fullbg"><img src="images/bg-fork.jpg" alt=""></div>
  <div class="dead-wrap">
    <div class="dead-grid">
      <article class="choice" onclick="go('dead_left')">
        <div class="ph"><img src="images/card-stairs.jpg" alt=""></div>
        <div class="label">Влево</div>
      </article>
      <article class="choice" onclick="go('common_room_intro')">
        <div class="ph"><img src="images/card-corridor.jpg" alt=""></div>
        <div class="label">Вправо</div>
      </article>
    </div>
  </div>
</section>

<section id="dead_left" class="screen">
  <div class="wrap"><div class="card centered">
    <h2>Поворот влево оказывается пустым. Вы возвращаетесь.</h2>
    <div class="btns">
      <a class="btn" onclick="go('dead_entrance')">Назад</a>
      <a class="btn" onclick="go('common_room_intro')">Идти вправо</a>
    </div>
  </div></div>
</section>

<!-- Общая гостиная: тут пока фон и карточки — ЗАГЛУШКИ -->
<section id="common_room_intro" class="screen">
  <div class="fullbg"><img src="images/placeholder-bg.jpg" alt=""></div>
  <div class="overlay">
    <div class="wrap"><div class="card centered">
      <h2>Здесь воздух теплее, и вы чувствуете, что тыква может быть неподалёку. Странный шёпот становится всё отчётливее. Вы осматриваетесь и видите на полу тыквенные семечки. Куда они ведут?</h2>
      <div class="grid">
        <article class="choice" onclick="go('s1a')">
          <div class="ph"><img src="images/placeholder-card.jpg" alt=""></div>
          <div class="label">Туда, где обычно слышится смех студентов</div>
        </article>
        <article class="choice" onclick="go('coming_soon')">
          <div class="ph"><img src="images/placeholder-card.jpg" alt=""></div>
          <div class="label">Туда, виден золотистый свет</div>
        </article>
        <article class="choice" onclick="go('s1b')">
          <div class="ph"><img src="images/placeholder-card.jpg" alt=""></div>
          <div class="label">Туда, где пахнет золой</div>
        </article>
      </div>
    </div></div>
  </div>
</section>

<section id="s1a" class="screen">
  <div class="fullbg"><img src="images/placeholder-bg.jpg" alt=""></div>
  <div class="overlay">
    <div class="wrap"><div class="card centered">
      <div class="pill">Коридор Слизерина</div>
      <h2>Вы идёте по блестящему влажному камню. Из-за угла слышится отчётливый тихий шёпот: «Предназначение… судьба...»</h2>
      <div class="grid2">
        <article class="choice" onclick="go('s1b')">
          <div class="ph"><img src="images/placeholder-card.jpg" alt=""></div>
          <div class="label">К свету</div>
        </article>
        <article class="choice" onclick="go('s1c')">
          <div class="ph"><img src="images/placeholder-card.jpg" alt=""></div>
          <div class="label">К тьме</div>
        </article>
      </div>
      <div class="btns"><a class="btn" onclick="go('common_room_intro')">Назад</a></div>
    </div></div>
  </div>
</section>

<section id="s1b" class="screen">
  <div class="fullbg"><img src="images/placeholder-bg.jpg" alt=""></div>
  <div class="overlay">
    <div class="wrap"><div class="card centered">
      <h2>Здесь влажно, пахнет плесенью и сыростью. Вы слышите шорох и… это что, тыква катается?</h2>
      <div class="btns">
        <a class="btn" onclick="go('s1final_b')">Войти в дверь</a>
        <a class="btn" onclick="go('s1a')">Назад</a>
      </div>
    </div></div>
  </div>
</section>

<section id="s1c" class="screen">
  <div class="fullbg"><img src="images/placeholder-bg.jpg" alt=""></div>
  <div class="overlay">
    <div class="wrap"><div class="card centered">
      <h2>Тьма впитывает шаги. Где-то впереди короткий глухой удар — и тишина.</h2>
      <div class="btns">
        <a class="btn" onclick="go('s1final_c')">Идти на звук</a>
        <a class="btn" onclick="go('s1a')">Назад</a>
      </div>
    </div></div>
  </div>
</section>

<!-- Финалы (фон-заглушка; тексты твои) -->
<section id="s1final_b" class="screen">
  <div class="fullbg"><img src="images/placeholder-bg.jpg" alt=""></div>
  <div class="overlay">
    <div class="wrap"><div class="card centered">
      <div class="pill">Финал</div>
      <h2>Общий зал факультета Слизерина</h2>
      <p>Дверь открывается. Катящаяся по залу тыква замирает, притворившись самой обычной тыквой. Но вы-то сразу узнаёте в этой тыкве виновницу бессонницы многих студентов! Она тоже вас замечает и срывается с места, запрыгивая на кресло напротив камина. Кажется, она надеялась притвориться подушкой, но вы её раскусили.</p>
      <p><strong>Поздравляем, вы нашли виновницу в Общем Зале на диване!</strong> Напишите в теме «Общий зал» рпг-пост, как вы шли по следам тыквы и нашли её. Ожидайте 2 этапа, чтобы узнать, какую тыкву вы нашли.</p>
      <div class="btns">
        <a class="btn" href="https://slytherin.dhog.org/viewtopic.php?t=10" target="_blank" rel="noopener">Перейти в тему «Общий зал»</a>
        <a class="btn" onclick="go('s0')">Начать заново</a>
      </div>
    </div></div>
  </div>
</section>

<section id="s1final_c" class="screen">
  <div class="fullbg"><img src="images/placeholder-bg.jpg" alt=""></div>
  <div class="overlay">
    <div class="wrap"><div class="card centered">
      <div class="pill">Финал</div>
      <h2>Общий зал факультета Слизерина</h2>
      <p>Дверь открывается. Вы оказываетесь в общем зале факультета Слизерин, но тыквы нигде не видно. Вы ступаете внутрь на одних носочках, стараясь двигаться бесшумно. Шорох! Бум! Тыква вдруг прыгнула прямо на вас. Вы теряете равновесие и падаете... Но удара не происходит. Тыква замерла и смотрит на вас.</p>
      <p><strong>Поздравляем, вы были атакованы тыквой в Общем Зале!</strong> Кто знает, может вы найдёте общий язык. Напишите в теме «Общий зал» рпг-пост, как вы шли по следам тыквы и нашли её. Ожидайте 2 этапа, чтобы узнать, какую тыкву вы нашли.</p>
      <div class="btns">
        <a class="btn" href="https://slytherin.dhog.org/viewtopic.php?t=10" target="_blank" rel="noopener">Перейти в тему «Общий зал»</a>
        <a class="btn" onclick="go('s0')">Начать заново</a>
      </div>
    </div></div>
  </div>
</section>

<section id="coming_soon" class="screen">
  <div class="wrap"><div class="card centered">
    <h2>Этот путь добавим следующим.</h2>
    <div class="btns"><a class="btn" onclick="history.length>1?history.back():go('s_intro1')">Назад</a></div>
  </div></div>
</section>

<script>
  let current = 's0';
  function go(id){
    const from = document.getElementById(current);
    const to = document.getElementById(id);
    if(!to || from===to) return;
    if(from){ from.classList.add('out'); }
    setTimeout(()=>{
      if(from){ from.classList.remove('active','out'); }
      to.classList.add('active');
      current = id;
      history.replaceState(null, "", "#"+id);
      window.scrollTo({top:0, behavior:"instant"});
    }, 190);
  }
  window.addEventListener('load', ()=>{
    const hash = location.hash.slice(1);
    if(hash && document.getElementById(hash)) go(hash);
  });
</script>
</body>
</html>
